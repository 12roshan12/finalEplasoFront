<div class="p-4 bg-white">

    <div class="flex flex-row justify-between">
        <div class="headMain">Trips</div>
        <div class="headButton cursor-pointer">
            <span>
                <button (click)="openPopup()" class="flex flex-row gap-x-4 items-center">
                    <span>
                        <svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M5.16666 12.3337V7.33366H0.166664V5.66699H5.16666V0.666992H6.83333V5.66699H11.8333V7.33366H6.83333V12.3337H5.16666Z"
                                fill="#FBFBFB" />
                        </svg>

                    </span>
                    <span>
                        Create Trip
                    </span>
                </button>
            </span>
        </div>
    </div>

    <div class="pt-5 pb-8">
        <app-bread-crumb [routeData]="routeData"></app-bread-crumb>
    </div>
    <div class="p-6 flex justify-center items-center text-lg" *ngIf="tripList.length == 0">
        No trip found. Please add some trip.
    </div>

    <div *ngFor="let catData of categoryList">
        <span class="text-xl font-semibold">{{catData.name}}</span>
        <div class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 px-2 py-4">
            <ng-container *ngFor="let data of tripList">
                <ng-container *ngIf="data.category == catData.name">
                    <div class="package-div unhide flex flex-col rounded-xl relative cursor-pointer">
                        <div class="p-1 relative z-99">
                            <span class="bannerDiv rounded-xl"> <img [src]="imageEnvironmentUrl+data.tripImage"
                                    class="w-full h-[30vh] rounded-xl object-cover z-90" /></span>
                            <span *ngIf="data.isSpecialOffer == true" class="absolute top-[-12%] right-[-5%]"><img
                                    src="assets/images/discount.png" class="w-12 h-12" /></span>
                            <span
                                class="package-div absolute bottom-[2%] right-[3%] px-1 flex flex-row gap-x-2 !rounded-lg items-center">
                                <span class="font-semibold text-black ">{{data.rating}}</span> <img
                                    src="assets/images/star.png" class="w-4 h-4 " /></span>
                            <div
                                class="absolute top-0 left-0 flex flex-row gap-x-2 justify-center items-center p-2 bg-white rounded-lg">
                                <span matTooltip="Preview" class="cursor-pointer">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path opacity="0.4"
                                            d="M17.7084 7.62409C15.7834 4.59909 12.9667 2.85742 10 2.85742C8.51669 2.85742 7.07502 3.29076 5.75835 4.09909C4.44169 4.91576 3.25835 6.10742 2.29169 7.62409C1.45835 8.93242 1.45835 11.0574 2.29169 12.3658C4.21669 15.3991 7.03335 17.1324 10 17.1324C11.4834 17.1324 12.925 16.6991 14.2417 15.8908C15.5584 15.0741 16.7417 13.8824 17.7084 12.3658C18.5417 11.0658 18.5417 8.93242 17.7084 7.62409ZM10 13.3658C8.13335 13.3658 6.63335 11.8574 6.63335 9.99909C6.63335 8.14076 8.13335 6.63242 10 6.63242C11.8667 6.63242 13.3667 8.14076 13.3667 9.99909C13.3667 11.8574 11.8667 13.3658 10 13.3658Z"
                                            fill="#4D4D4D" />
                                        <path
                                            d="M10 7.61719C8.69167 7.61719 7.625 8.68385 7.625 10.0005C7.625 11.3089 8.69167 12.3755 10 12.3755C11.3083 12.3755 12.3833 11.3089 12.3833 10.0005C12.3833 8.69219 11.3083 7.61719 10 7.61719Z"
                                            fill="#4D4D4D" />
                                    </svg>
                                </span>

                                <span matTooltip="Edit" class="cursor-pointer"
                                    [routerLink]="[ '/dashboard/trip-update',data._id]">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path opacity="0.4"
                                            d="M17.5 18.333H2.5C2.15833 18.333 1.875 18.0497 1.875 17.708C1.875 17.3663 2.15833 17.083 2.5 17.083H17.5C17.8417 17.083 18.125 17.3663 18.125 17.708C18.125 18.0497 17.8417 18.333 17.5 18.333Z"
                                            fill="#292D32" />
                                        <path opacity="0.4"
                                            d="M15.85 2.90005C14.2333 1.28338 12.65 1.24172 10.9917 2.90005L9.98333 3.90838C9.9 3.99172 9.86666 4.12505 9.9 4.24172C10.5333 6.45005 12.3 8.21672 14.5083 8.85005C14.5417 8.85838 14.575 8.86672 14.6083 8.86672C14.7 8.86672 14.7833 8.83338 14.85 8.76672L15.85 7.75838C16.675 6.94172 17.075 6.15005 17.075 5.35005C17.0833 4.52505 16.6833 3.72505 15.85 2.90005Z"
                                            fill="#292D32" />
                                        <path
                                            d="M13.0083 9.60866C12.7667 9.49199 12.5333 9.37533 12.3083 9.24199C12.125 9.13366 11.95 9.01699 11.775 8.89199C11.6333 8.80033 11.4667 8.66699 11.3083 8.53366C11.2917 8.52533 11.2333 8.47533 11.1667 8.40866C10.8917 8.17533 10.5833 7.87533 10.3083 7.54199C10.2833 7.52533 10.2417 7.46699 10.1833 7.39199C10.1 7.29199 9.95833 7.12532 9.83333 6.93366C9.73333 6.80866 9.61666 6.62533 9.50833 6.44199C9.375 6.21699 9.25833 5.99199 9.14166 5.75866C9.025 5.50866 8.93333 5.26699 8.85 5.04199L3.61666 10.2753C3.50833 10.3837 3.40833 10.592 3.38333 10.7337L2.93333 13.9253C2.85 14.492 3.00833 15.0253 3.35833 15.3837C3.65833 15.6753 4.075 15.8337 4.525 15.8337C4.625 15.8337 4.725 15.8253 4.825 15.8087L8.025 15.3587C8.175 15.3337 8.38333 15.2337 8.48333 15.1253L13.7167 9.89199C13.4833 9.80866 13.2583 9.71699 13.0083 9.60866Z"
                                            fill="#292D32" />
                                    </svg>
                                </span>
                                <div class="cursor-pointer" matTooltip="Delete Trip" (click)="deleteTirp(data._id)">
                                    <img src="assets/images/trash.png" class="w-5 h-5" />
                                </div>
                            </div>
                        </div>
                        <div class="p-2 gap-y-4">
                            <div class="flex flex-row justify-between items-center">
                                <p class="pTitle font-semibold pb-2">{{data.name}}</p> <span
                                    class="flex gap-x-2 items-center" matTooltip="Total Views"> <img
                                        src="assets/images/visiblity.png" class="w-4 h-4 text-xs" />
                                    {{data.totalViews}} </span>
                            </div>
                            <p class=" flex flex-col gap-x-4 pb-2"> <span
                                    [ngClass]="data.isSpecialOffer.toString() == 'true'? 'text-red-600 line-through':'' ">USD.{{data.price}}</span>
                                <span *ngIf="data.isSpecialOffer == true" class="text-green-600">USD.{{data.offerPrice}}
                                    (20% Off)
                                </span>
                            </p>
                            <span class="flex flex-row gap-x-2 items-center pb-2"> <img src="assets/images/calendar.png"
                                    class="w-6 h-6" />
                                <p>{{data.summary.duration | titlecase}}</p>
                            </span>
                            <span class="flex flex-row gap-x-2 items-center pb-2"> <img src="assets/images/location.png"
                                    class="w-6 h-6" />
                                <p>{{data.summary.destination | titlecase}}</p>
                            </span>
                            <span class="flex flex-row gap-x-2 items-center pb-2"> <img src="assets/images/categories.png" class="w-6 h-6" />
                                <p>{{data.category | titlecase}}</p>
                              </span>
                              <span class="flex flex-row gap-x-2 items-center"> <img src="assets/images/group.png" class="w-6 h-6" />
                                <p>{{data.summary.groupSize }} People</p>
                              </span>
                        </div>
                    </div>
                </ng-container>
            </ng-container>
        </div>
    </div>
</div>